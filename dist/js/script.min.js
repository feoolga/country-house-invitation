const modalBlock=document.querySelector("#weather"),weatherBlock=document.querySelector("#viget"),gismeteo="https://www.gismeteo.ru/weather-timiryazevo-133937/month/";let months=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],date=new Date,today=date.getDate()+" "+months[date.getMonth()];const openWeather=document.querySelector(".time__weather");function closeModal(){modalBlock.classList.remove("open")}openWeather.addEventListener("click",(function(){modalBlock.classList.add("open")}));const closeX=document.querySelector(".close-viget");async function loadWeather(){weatherBlock.innerHTML='<div class="loading"> <img src="img/load.gif" alt="Loading..."></div>';const t=await fetch("https://api.openweathermap.org/data/2.5/weather?units=metric&q=Gorokhovets&appid=5c2ab0f2e6c2ad23c076711877a90062",{method:"GET"}),e=await t.json();t.ok?getWeather(e):weatherBlock.innerHTML=e.message}function getWeather(t){let e;console.log(t),e="Gorokhovets"===t.name?"Гороховец":t.name;let n=Math.round(t.main.temp),a=t.weather[0].main,o=t.weather[0].icon;const l=`\n\t\t<div class="city"><span>${e}</span><span class="weather__small"> ${today}</span></div>\n\t\t<div class="row">\n\t\t\t<div>${a}</div>\n\t\t\t<img class="icon" src="https://openweathermap.org/img/w/${o}.png" alt="">\n\t\t</div>\n\t\t<div class="temper">${n}</div>\n\t\t<div id="giz" class="giz"><a href="${gismeteo}" target="_blank">Погода на даче на месяц</a></div>\n\t`;weatherBlock.innerHTML=l}function Calendar(t,e){const n=document.querySelector("#calengarParent");for(let i=0;i<3;i++){var a=new Date(t,e+i+1,0).getDate(),o=new Date(t,e+i,a),l=new Date(o.getFullYear(),o.getMonth(),a).getDay(),d=new Date(o.getFullYear(),o.getMonth(),1).getDay(),c="<tr>";if(0!=d)for(var r=1;r<d;r++)c+="<td>";else for(r=0;r<6;r++)c+="<td>";for(r=1;r<=a;r++)r==(new Date).getDate()&&o.getFullYear()==(new Date).getFullYear()&&o.getMonth()==(new Date).getMonth()?c+='<td class="today">'+r:c+="<td>"+r,0==new Date(o.getFullYear(),o.getMonth(),r).getDay()&&(c+="<tr>");for(r=l;r<7;r++)c+="<td>&nbsp;";let s=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][o.getMonth()]+" "+o.getFullYear(),g=document.createElement("div");g.classList.add("col"),g.innerHTML=`\n\t\t\t<table id="calendar">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t<td colspan="5">${s}</td>\n\t\t\t\t\t\t<td></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Пн</td>\n\t\t\t\t\t\t<td>Вт</td>\n\t\t\t\t\t\t<td>Ср</td>\n\t\t\t\t\t\t<td>Чт</td>\n\t\t\t\t\t\t<td>Пт</td>\n\t\t\t\t\t\t<td>Сб</td>\n\t\t\t\t\t\t<td>Вс</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>${c}</tbody>\n\t\t\t</table>\n\t\t`,n.appendChild(g)}}closeX.addEventListener("click",closeModal),modalBlock.addEventListener("click",(function(t){t.target.closest(".viget")||closeModal()})),weatherBlock&&loadWeather(),document.querySelector(".hero").addEventListener("mousemove",(t=>{Object.assign(document.documentElement,{style:`\n                --move-x: ${-.005*(t.clientX-window.innerWidth/2)}deg;\n                --move-y: ${-.01*(t.clientY-window.innerHeight/2)}deg;\n            `})})),function(){let t=document.querySelector(".large-img");document.querySelectorAll(".col-image").forEach((function(e,n){e.addEventListener("click",(function(){console.log(n),t.classList.add("open");let e=`\n            <div class="large-img__card">\n                <img src="${"/img/list/"+(n+1)+"_img.jpg"}" alt="где она?">\n            </div>\n            `;t.innerHTML=e}))})),t.addEventListener("click",(function(){this.classList.remove("open")}))}(),Calendar((new Date).getFullYear(),(new Date).getMonth());let days=document.querySelectorAll("td");for(let t of days)t.addEventListener("click",(function(t){let e=t.target;console.log(e),e.classList.toggle("clicked")}));